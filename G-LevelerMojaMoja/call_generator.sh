#!/bin/bash

# rm -fr ./testcases/in
# rm -fr ./testcases/out
# mkdir ./testcases/in
# mkdir ./testcases/out

M=(
    "10 1000 -10 10" "10 1000 0 10" "10 1000 -10 0"
    "10 1000 1 -1"   "10 1000 1 -1"

    "50 1000 -10 10"   "50 1000 -10 10"
    "50 1000 -100 100" "50 1000 -100 100"

    "100 1000 -100 100" "100 1000 -100 100"
    "100 1000 -100 100" "100 1000 -100 100"

    "100 1000 -1000 1000"       "100 1000 -1000 1000"
    "100 1000 -5000 5000"       "100 1000 -5000 5000"
    "100 1000 -10000 10000"     "100 1000 -10000 10000"
    "100 1000 -1000000 1000000" "100 1000 -1000000 1000000"

    "100 10000 1 -1" "100 10000 1 -1"

    "100 10000 0 0" "100 10000 1000000000 1000000000"

    "300 1000 -100 100"         "300 1000 -100 100"
    "300 1000 -1000000 1000000" "300 1000 -1000000 1000000"
    "300 100 -4000 4000"        "300 100 -4000 4000"
    "300 100 -4000 4000"        "300 100 -4000 4000"
    "300 1000 1 -1"             "300 10000 1 -1"

    "500 1000 -10 10"     "500 1000 -100 100"
    "500 1000 -1000 1000" "500 1000 -1000000 1000000"
    "500 1000 1 -1"       "500 10000 1 -1"

    "1000 1000 -1000 1000" "1000 10000 1 -1"
  )

i=1;
for m in "${M[@]}"; do
    j="$i"
    if [ $j -lt 10 ]; then
        j="0$j"
    fi

    tmpfile1=$(mktemp --tmpdir=.)
    echo -e "$m" > "$tmpfile1"
    ./generator.exe < "$tmpfile1" > "testcases/in/testcase-$j"
    rm "$tmpfile1"

    i=$((i + 1))
    echo $j
done

./call_verifier.sh
./call_solver.sh ./solver.exe
