#!/bin/bash

# rm -fr ./testcases/in
# rm -fr ./testcases/out
# mkdir ./testcases/in
# mkdir ./testcases/out

M=(
    "1 \n 1" "1 \n 1" "1 \n 1" "1 \n 1" "1 \n 1"
    "1 \n 10" "1 \n 10" "1 \n 10" "1 \n 10" "1 \n 10"
    "1 \n 100" "1 \n 100" "1 \n 100" "1 \n 100" "1 \n 100"
    "1 \n 1000" "1 \n 1000" "1 \n 1000" "1 \n 1000" "1 \n 1000"
    "1 \n 10000" "1 \n 10000" "1 \n 10000" "1 \n 10000" "1 \n 10000"
    "1 \n 100000" "1 \n 100000" "1 \n 100000" "1 \n 100000" "1 \n 100000"

    "0 \n 2 100002"
    "0 \n 100002 200002"
    "0 \n 200002 300002"
    "0 \n 300002 400002"
    "0 \n 400002 500002"
    "0 \n 500002 600002"
    "0 \n 600002 700002"
    "0 \n 700002 800002"
    "0 \n 800002 900002"
    "0 \n 900002 1000002"
    "0 \n 1000002 1100002"
    "0 \n 1100002 1200002"
    "0 \n 1200002 1300002"
    "0 \n 1300002 1400002"
    "0 \n 1400002 1500002"
    "0 \n 1500002 1600002"
    "0 \n 1600002 1700002"
    "0 \n 1700002 1800002"
    "0 \n 1800002 1900002"
    "0 \n 1900002 2000001"
  )

i=1
for m in "${M[@]}"; do
    j="$i"
    if [ $j -lt 10 ]; then
        j="0$j"
    fi

    tmpfile1=$(mktemp --tmpdir=.)
    echo -e "$m" > "$tmpfile1"
    pypy3 ./generator.py < "$tmpfile1" > "testcases/in/testcase-$j"
    rm "$tmpfile1"

    i=$((i + 1))
    echo $j
done

./call_verifier.sh
./call_solver.sh ./solver.exe
